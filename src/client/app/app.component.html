<mat-sidenav-container class="container">
  <mat-sidenav #sidenav mode="over" opened="false" color="primary">
    <mat-toolbar class="toolbar" color="primary">
      <div class="toolbar__header">
        <a class="app-name" mat-button routerLink="/">
          <img src="assets/logo.png" />
          <span>LINQUA</span>
        </a>
      </div>
    </mat-toolbar>

    <mat-card *ngIf="isLoggedIn | async" class="user-card">
      <mat-card-header>
        <img mat-card-avatar [src]="user.photoURL || 'assets/generic-avatar.png'">
        <mat-card-title>{{ user.displayName }}</mat-card-title>
        <mat-card-subtitle>{{ user.email || '(no email)' }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions>
        <button mat-raised-button (click)="logout()">
          Logout
        </button>
      </mat-card-actions>
    </mat-card>
  </mat-sidenav>

  <mat-toolbar class="toolbar" color="primary">
    <div class="toolbar__side-content">
      <button mat-icon-button (click)="sidenav.toggle()" *ngIf="isLoggedIn | async">
        <mat-icon>menu</mat-icon>
      </button>
    </div>

    <header class="toolbar__header">
      <a class="app-name" mat-button routerLink="/">
        <img src="assets/logo.png" />
        <span>LINQUA</span>
      </a>
    </header>

    <div class="toolbar__side-content">

    </div>
  </mat-toolbar>

  <main>
    <ng-container [ngSwitch]="state">
      <ng-container *ngSwitchCase="states.LoggedIn">
        <app-home></app-home>
      </ng-container>

      <ng-container *ngSwitchCase="states.HandleLoginRedirect">
        <div class="handle-login-redirect-container">
          Just a moment, verifying login...
          <div class="spinner">
            <mat-spinner mode="indeterminate" [diameter]="40" [strokeWidth]="5"></mat-spinner>
          </div>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="states.LoginNeeded">
        <app-login-control [redirectAuthResult]="redirectAuthResult" (loginSuccess)="onLoginSuccess()"></app-login-control>
      </ng-container>

      <ng-container *ngSwitchDefault>
      </ng-container>
    </ng-container>
  </main>

  <footer></footer>
</mat-sidenav-container>
